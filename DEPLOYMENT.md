# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é AI Bot –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–µ—Ä–≤–µ—Ä—É)
2. [–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
4. [–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–∑–∞–ø—É—Å–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (HTTPS)](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ssl-https)
6. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
8. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **CPU**: 2 vCPU
- **RAM**: 4 GB
- **–î–∏—Å–∫**: 20 GB SSD
- **–û–°**: Ubuntu 22.04 LTS / Debian 11+ / CentOS 8+

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–¥–ª—è production):
- **CPU**: 4 vCPU
- **RAM**: 8 GB
- **–î–∏—Å–∫**: 50 GB SSD
- **–û–°**: Ubuntu 22.04 LTS

### –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã:
- `22` - SSH
- `80` - HTTP
- `443` - HTTPS

---

## üîß –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@YOUR_SERVER_IP
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# Ubuntu/Debian
apt update && apt upgrade -y

# CentOS/RHEL
dnf update -y
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
apt remove docker docker-engine docker.io containerd runc

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
apt install -y ca-certificates curl gnupg lsb-release

# –î–æ–±–∞–≤–ª—è–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π GPG –∫–ª—é—á Docker
mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker Engine
apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker

```bash
docker --version
docker compose version
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ sudo (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É docker (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
groupadd docker

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É
usermod -aG docker $USER

# –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
newgrp docker
```

### –®–∞–≥ 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç

```bash
apt install -y git curl wget htop nano
```

### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall (UFW)

```bash
# –í–∫–ª—é—á–∞–µ–º UFW
ufw enable

# –†–∞–∑—Ä–µ—à–∞–µ–º SSH
ufw allow 22

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS
ufw allow 80
ufw allow 443

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
ufw status
```

### –®–∞–≥ 8: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
mkdir -p /opt/apps
cd /opt/apps

# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone YOUR_REPOSITORY_URL ai_bot
cd ai_bot

# –î–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞–º
chmod +x docker-manage.sh docker-entrypoint.sh
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env.prod

```bash
# –ö–æ–ø–∏—Ä—É–µ–º —à–∞–±–ª–æ–Ω
cp .env.prod.example .env.prod

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano .env.prod
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env.prod` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

#### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Security)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|----------|----------|--------------|
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `openssl rand -hex 32` |
| `POSTGRES_PASSWORD` | –ü–∞—Ä–æ–ª—å PostgreSQL | –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `openssl rand -base64 24` |
| `REDIS_PASSWORD` | –ü–∞—Ä–æ–ª—å Redis | –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `openssl rand -base64 24` |

#### ü§ñ Telegram Bot

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|----------|----------|--------------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ | 1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram<br>2. –ù–∞–π–¥–∏—Ç–µ @BotFather<br>3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`<br>4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º<br>5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω |

#### üß† OpenAI API

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|----------|----------|--------------|
| `OPENAI_API_KEY` | API –∫–ª—é—á OpenAI | 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [platform.openai.com](https://platform.openai.com)<br>2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [API Keys](https://platform.openai.com/api-keys)<br>3. –ù–∞–∂–º–∏—Ç–µ "Create new secret key"<br>4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á |

#### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å |
|----------|----------|--------------|
| `SENTRY_DSN` | DSN –¥–ª—è Sentry | 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [sentry.io](https://sentry.io)<br>2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç (Python)<br>3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DSN |
| `LANGCHAIN_API_KEY` | API –∫–ª—é—á LangSmith | 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [smith.langchain.com](https://smith.langchain.com)<br>2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí API Keys<br>3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á |

### –®–∞–≥ 3: –ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```bash
# –ü—Ä–∏–º–µ—Ä .env.prod (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è!)

ENVIRONMENT=production

# Database
POSTGRES_DB=onboarding_bot
POSTGRES_USER=user
POSTGRES_PASSWORD=Xk9mNp2qRs5tVw8yAb3cDf6gHj
DATABASE_URL=postgresql+asyncpg://user:Xk9mNp2qRs5tVw8yAb3cDf6gHj@postgres:5432/onboarding_bot

# Redis
REDIS_PASSWORD=Lm4nOp7qRs0tUv3wXy6zA
REDIS_URL=redis://:Lm4nOp7qRs0tUv3wXy6zA@redis:6379/0

# OpenAI
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# Security
SECRET_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª–µ–π

**–í–ê–ñ–ù–û**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª–∏ –≤ URL —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```bash
# –ü–∞—Ä–æ–ª—å –≤ POSTGRES_PASSWORD –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º –≤ DATABASE_URL
POSTGRES_PASSWORD=MyPassword123
DATABASE_URL=postgresql+asyncpg://user:MyPassword123@postgres:5432/onboarding_bot
#                                    ^^^^^^^^^^^^^^^ <- —Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å

# –ü–∞—Ä–æ–ª—å –≤ REDIS_PASSWORD –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º –≤ REDIS_URL
REDIS_PASSWORD=MyRedisPassword456
REDIS_URL=redis://:MyRedisPassword456@redis:6379/0
#                 ^^^^^^^^^^^^^^^^^^ <- —Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ docker-manage.sh (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
./docker-manage.sh prod:build

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./docker-manage.sh prod:up

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./docker-manage.sh health prod
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose –Ω–∞–ø—Ä—è–º—É—é

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker compose -f docker-compose.prod.yml --env-file .env.prod build

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker compose -f docker-compose.prod.yml --env-file .env.prod up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose -f docker-compose.prod.yml --env-file .env.prod ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose -f docker-compose.prod.yml --env-file .env.prod logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
curl http://localhost:8000/health

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
# {"status":"healthy","database":"connected","redis":"connected","qdrant":"connected"}
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
./docker-manage.sh prod:down

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker compose -f docker-compose.prod.yml --env-file .env.prod down
```

---

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (HTTPS)

### –í–∞—Ä–∏–∞–Ω—Ç 1: Let's Encrypt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ certbot
apt install -y certbot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx –≤—Ä–µ–º–µ–Ω–Ω–æ
docker compose -f docker-compose.prod.yml --env-file .env.prod stop nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot certonly --standalone -d yourdomain.com -d www.yourdomain.com

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem docker/nginx/ssl/cert.pem
cp /etc/letsencrypt/live/yourdomain.com/privkey.pem docker/nginx/ssl/key.pem
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è HTTPS

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `docker/nginx/conf.d/default.conf`:

```bash
nano docker/nginx/conf.d/default.conf
```

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é HTTPS –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ –∏ –∑–∞–º–µ–Ω–∏—Ç–µ `your-domain.com` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω.

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx

```bash
docker compose -f docker-compose.prod.yml --env-file .env.prod restart nginx
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞–µ–º cron –∑–∞–¥–∞—á—É
crontab -e

# –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü):
0 0 1 * * certbot renew --quiet && cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem /opt/apps/ai_bot/docker/nginx/ssl/cert.pem && cp /etc/letsencrypt/live/yourdomain.com/privkey.pem /opt/apps/ai_bot/docker/nginx/ssl/key.pem && docker compose -f /opt/apps/ai_bot/docker-compose.prod.yml restart nginx
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./docker-manage.sh prod:logs

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
./docker-manage.sh prod:logs app
./docker-manage.sh prod:logs bot
./docker-manage.sh prod:logs postgres
./docker-manage.sh prod:logs redis
./docker-manage.sh prod:logs qdrant
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
docker system df
```

### –î–æ—Å—Ç—É–ø –∫ Sentry

–ï—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ `SENTRY_DSN`, –≤—Å–µ –æ—à–∏–±–∫–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ Sentry.
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [sentry.io](https://sentry.io) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—à–∏–±–æ–∫.

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd /opt/apps/ai_bot

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã
./docker-manage.sh prod:build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–æ—Å—Ç–æ–µ–º
docker compose -f docker-compose.prod.yml --env-file .env.prod up -d --no-deps --build app bot
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –ë–î

```bash
cd /opt/apps/ai_bot

# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã
./docker-manage.sh prod:build

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
./docker-manage.sh prod:down

# –ó–∞–ø—É—Å–∫–∞–µ–º (–º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
./docker-manage.sh prod:up
```

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
./docker-manage.sh db:backup prod

# –§–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω: backup_YYYYMMDD_HHMMSS.sql
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
cat > /opt/apps/ai_bot/backup.sh << 'EOF'
#!/bin/bash
cd /opt/apps/ai_bot
BACKUP_DIR="/opt/backups"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø –ë–î
docker compose -f docker-compose.prod.yml --env-file .env.prod exec -T postgres pg_dump -U user onboarding_bot > $BACKUP_DIR/db_$DATE.sql

# –ë—ç–∫–∞–ø uploads
docker cp ai_bot_app_prod:/app/uploads $BACKUP_DIR/uploads_$DATE

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find $BACKUP_DIR -mtime +7 -delete

echo "Backup completed: $DATE"
EOF

chmod +x /opt/apps/ai_bot/backup.sh

# –î–æ–±–∞–≤–ª—è–µ–º –≤ cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: 0 3 * * * /opt/apps/ai_bot/backup.sh >> /var/log/backup.log 2>&1
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
cat backup_file.sql | docker compose -f docker-compose.prod.yml --env-file .env.prod exec -T postgres psql -U user onboarding_bot
```

---

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose -f docker-compose.prod.yml --env-file .env.prod logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker compose -f docker-compose.prod.yml --env-file .env.prod config
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
docker compose -f docker-compose.prod.yml --env-file .env.prod ps postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL
docker compose -f docker-compose.prod.yml --env-file .env.prod logs postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è –≤ .env.prod
# POSTGRES_PASSWORD –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º –≤ DATABASE_URL
```

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
docker compose -f docker-compose.prod.yml --env-file .env.prod logs bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ TELEGRAM_BOT_TOKEN –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –≥–¥–µ-—Ç–æ –µ—â–µ
# (–æ–¥–∏–Ω —Ç–æ–∫–µ–Ω = –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞)
```

### –ü—Ä–æ–±–ª–µ–º–∞: OpenAI API –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker compose -f docker-compose.prod.yml --env-file .env.prod logs app

# –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# - –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
# - –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±–∞–ª–∞–Ω—Å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI
# - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
docker stats

# –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –≤ docker-compose.prod.yml
# –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ swap –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
fallocate -l 4G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
echo '/swapfile none swap sw 0 0' >> /etc/fstab
```

### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ Docker

```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
./docker-manage.sh cleanup

# –í–ù–ò–ú–ê–ù–ò–ï: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
./docker-manage.sh cleanup:all
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./docker-manage.sh prod:shell

# –í—Ö–æ–¥ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
./docker-manage.sh db:shell prod

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤—Ä—É—á–Ω—É—é
docker compose -f docker-compose.prod.yml --env-file .env.prod exec app alembic upgrade head

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose -f docker-compose.prod.yml --env-file .env.prod exec app alembic revision --autogenerate -m "description"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f docker-compose.prod.yml --env-file .env.prod restart app

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ `/opt/apps/ai_bot`
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env.prod` –∏–∑ `.env.prod.example`
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
  - [ ] `SECRET_KEY`
  - [ ] `POSTGRES_PASSWORD` –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å `DATABASE_URL`
  - [ ] `REDIS_PASSWORD` –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å `REDIS_URL`
  - [ ] `TELEGRAM_BOT_TOKEN`
  - [ ] `OPENAI_API_KEY`
- [ ] –û–±—Ä–∞–∑—ã —Å–æ–±—Ä–∞–Ω—ã: `./docker-manage.sh prod:build`
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ: `./docker-manage.sh prod:up`
- [ ] Health check –ø—Ä–æ—Ö–æ–¥–∏—Ç: `curl http://localhost:8000/health`
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: –Ø–Ω–≤–∞—Ä—å 2026  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0
